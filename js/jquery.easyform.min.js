/*!easyform v0.1 2013-11-07 */
(function(e){var r=function(r,t){function i(){var r=!0,t=!0;return e.each(f.fields,function(t,i){e(t).each(function(e,t){s(t,i)||(r=!1)})}),t=r&&n?n()===!1?!1:!0:!0,r&&t}var o,n,a={};e.isPlainObject(t)&&(o=t.submitButton||null,n="function"==typeof t.success?t.success:null,e.isArray(t.fields)?e.each(t.fields,function(e,r){a[r]={}}):e.isPlainObject(t.fields)?a=t.fields:"string"==typeof t.fields&&(a[t.fields]={})),this.fields=a;var f=this;r.each(function(){o?e(o,e(this)).bind("click",i):e(this).bind("submit",i)}),e.each(a,function(r,t){e(r).each(function(r,i){i.easyformBlur=!0,e(i).bind("blur",function(){this.easyformBlur&&s(this,t)})})})};r.prototype.removeFields=function(r){function t(r){delete n[r],e(r).removeClass("error").each(function(e,r){o(r),r.easyformBlur=!1})}var s,i=this,n=i.fields;return e.isArray(r)?e.each(r,function(e,r){n[r]&&t(r)}):"string"==typeof r&&(s=r,t(s)),i},r.prototype.addFields=function(r){var t=this,s=t.fields;if(e.isPlainObject(r))e.each(r,function(e,r){s[e]=r});else if(e.isArray(r))e.each(r,function(e,r){s[r]={}});else if("string"==typeof r){var i=r;s[i]={}}return t};var t={email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,url:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/},s=function(r,s){var n=!0,a=null,f=s.error||"内容不能为空",l=e.trim(e(r).val());if(""===l)n=i(r,f);else for(var c in s)if(e.isPlainObject(s[c])){var d=s[c];if(a="string"==typeof d.test?t[d.test]:d.test,f=d.message||"数据格式错误",!a.test(l)){n=i(r,f);break}}return n&&o(r),n},i=function(r,t){if(r.easyformError)r.easyformError.find(".easyform-error-message").text(t);else{var s=e('<div class="easyform-error"></div>');s.html('<em></em><span class="easyform-error-message">'+t+"</span>").appendTo(e("body")),r.easyformError=s,e(r).addClass("error"),n(r,s[0]),s.fadeIn()}return!1},o=function(r){r.easyformError&&(r.easyformError.fadeOut(function(){e(this).remove()}),r.easyformError=null,e(r).removeClass("error"))},n=function(r,t){var s=e(r).offset(),i=s.top,o=s.left,n=e(r).outerWidth(),a=e(r).outerHeight(),f="rgb(215, 115, 115)",l=135,c="display:none;position: absolute; width: "+l+"px; background-color:"+f+"; color: #FFF; padding: 2px 8px; font-size: 13px; border-radius: 4px; line-height: 18px;left:"+(o+n+4)+"px;top:"+(i+(a-22)/2)+"px",d="position:absolute;width:0;height:0;line-height:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent "+f+" transparent transparent;top:6px;left:-10px;",u="display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";t.style.cssText=c,e(t).find("em")[0].style.cssText=d,e(t).find("span")[0].style.cssText=u};e.fn.easyform=function(e){return new r(this,e)}})(this.jQuery,window);