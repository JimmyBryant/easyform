/*!easyform v0.1 2013-11-07 */
(function(e){var r=function(r,s){function o(){var r=!0,t=!0;return e.each(l.fields,function(t,s){e(t).each(function(e,t){i(t,s)||(r=!1)})}),t=r&&a?a()===!1?!1:!0:!0,r&&t}var n,a,f={};e.isPlainObject(s)&&(n=s.submitButton||null,a="function"==typeof s.success?s.success:null,e.isArray(s.fields)?e.each(s.fields,function(e,r){f[r]={}}):e.isPlainObject(s.fields)?f=s.fields:"string"==typeof s.fields&&(f[s.fields]={})),this.fields=f;var l=this;r.each(function(){n?e(n,e(this)).bind("click",o):e(this).bind("submit",o)}),t(f)};r.prototype.removeFields=function(r){function t(r){delete o[r],e(r).removeClass("error").each(function(e,r){n(r),r.easyformBlur=!1})}var s,i=this,o=i.fields;return e.isArray(r)?e.each(r,function(e,r){o[r]&&t(r)}):"string"==typeof r&&(s=r,t(s)),i},r.prototype.addFields=function(r){var s=this,i={};if(e.isPlainObject(r))i=r;else if(e.isArray(r))e.each(r,function(e,r){i[r]={}});else if("string"==typeof r){var o=r;i[o]={}}return t(i),e.extend(s.fields,i),s};var t=function(r){e.each(r,function(r,t){e(r).each(function(r,s){s.easyformBlur||(s.easyformBlur=!0,e(s).bind("blur",function(){this.easyformBlur&&i(this,t)}))})})},s={email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,url:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/},i=function(r,t){var i=!0,a=null,f=t.error||"内容不能为空",l=e.trim(e(r).val());if(""===l)i=o(r,f);else for(var c in t)if(e.isPlainObject(t[c])){var d=t[c];if(a="string"==typeof d.test?s[d.test]:d.test,f=d.message||"数据格式错误",!a.test(l)){i=o(r,f);break}}return i&&n(r),i},o=function(r,t){if(r.easyformError)r.easyformError.find(".easyform-error-message").text(t);else{var s=e('<div class="easyform-error"></div>');s.html('<em></em><span class="easyform-error-message">'+t+"</span>").appendTo(e("body")),r.easyformError=s,e(r).addClass("error"),a(r,s[0]),s.fadeIn()}return!1},n=function(r){r.easyformError&&(r.easyformError.fadeOut(function(){e(this).remove()}),r.easyformError=null,e(r).removeClass("error"))},a=function(r,t){var s=e(r).offset(),i=s.top,o=s.left,n=e(r).outerWidth(),a=e(r).outerHeight(),f="rgb(215, 115, 115)",l=135,c="display:none;position: absolute; width: "+l+"px; background-color:"+f+"; color: #FFF; padding: 2px 8px; font-size: 13px; border-radius: 4px; line-height: 18px;left:"+(o+n+4)+"px;top:"+(i+(a-22)/2)+"px",d="position:absolute;width:0;height:0;line-height:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent "+f+" transparent transparent;top:6px;left:-10px;",u="display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";t.style.cssText=c,e(t).find("em")[0].style.cssText=d,e(t).find("span")[0].style.cssText=u};e.fn.easyform=function(e){return new r(this,e)}})(this.jQuery,window);