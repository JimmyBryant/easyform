/*!easyform v0.1 2013-11-07 */
(function(e){var r=function(r,t){function i(){var r=!0,t=!0;return e.each(a,function(e,t){s(e,t)||(r=!1)}),t=r&&n?n()===!1?!1:!0:!0,r&&t}var o,n,a={};e.isPlainObject(t)&&(o=t.submitButton||null,n="function"==typeof t.success?t.success:null,e.isArray(t.fields)?e.each(t.fields,function(e,r){a[r]={}}):e.isPlainObject(t.fields)?a=t.fields:"string"==typeof t.fields&&(a[t.fields]={})),this.fields=a,r.each(function(){o?e(o,e(this)).bind("click",i):e(this).bind("submit",i)}),e.each(a,function(r,t){e(r).bind("blur",function(){s(r,t)})})};r.prototype.removeFields=function(r){function t(r){delete o[r],e(r).removeClass("error").each(function(e,r){r.easyformError&&(r.easyformError=null)})}var s,i=this,o=i.fields;return e.isArray(r)?e.each(r,function(e,r){o[r]&&t(r)}):"string"==typeof r&&(s=r,t(s)),i},r.prototype.addFields=function(r){var t=this,s=t.fields;if(e.isPlainObject(r))e.each(r,function(e,r){s[e]=r});else if(e.isArray(r))e.each(r,function(e,r){s[r]={}});else if("string"==typeof r){var i=r;s[i]={}}return t};var t={email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,url:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/},s=function(r,s){var n=!0,a=null,f=s.error||"内容不能为空";return e(r).each(function(r,l){var c=e.trim(e(l).val());if(""===c)n=i(l,f);else for(var d in s)if(e.isPlainObject(s[d])){var u=s[d];if(a="string"==typeof u.test?t[u.test]:u.test,f=u.message||"数据格式错误",!a.test(c)){n=i(l,f);break}}n&&o(l)}),n},i=function(r,t){if(r.easyformError)r.easyformError.find(".easyform-error-message").text(t);else{var s=e('<div class="easyform-error"></div>');s.html('<em></em><span class="easyform-error-message">'+t+"</span>").appendTo(e("body")),r.easyformError=s,e(r).addClass("error"),n(r,s[0]),s.fadeIn()}return!1},o=function(r){r.easyformError&&(r.easyformError.fadeOut(function(){e(this).remove()}),r.easyformError=null,e(r).removeClass("error"))},n=function(r,t){var s=e(r).offset(),i=s.top,o=s.left,n=e(r).outerWidth(),a=e(r).outerHeight(),f="rgb(215, 115, 115)",l="display:none;position: absolute; width: 125px; background-color:"+f+"; color: #FFF; padding: 2px 8px; font-size: 13px; border-radius: 4px; line-height: 18px;left:"+(o+n+4)+"px;top:"+(i+(a-22)/2)+"px",c="position:absolute;width:0;height:0;line-height:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent "+f+" transparent transparent;top:6px;left:-10px;",d="display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";t.style.cssText=l,e(t).find("em")[0].style.cssText=c,e(t).find("span")[0].style.cssText=d};e.fn.easyform=function(e){return new r(this,e)}})(this.jQuery,window);