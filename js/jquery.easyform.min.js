/*!easyform v0.0.1 2013-11-05 */
(function(e,t){var r=function(t,r){function s(){var t=!0,r=!0;return e.each(a,function(e,r){i(e,r)||(t=!1)}),r=null===o?!0:o()===!1?!1:!0,t&&r}var n,o,a={};e.isPlainObject(r)&&(n=r.submitButton||null,o="function"==typeof r.success?r.success:null,e.isArray(r.fields)?e.each(r.fields,function(e,t){a[t]={}}):e.isPlainObject(r.fields)&&(a=r.fields)),this.fields=a,t.each(function(){n?e(n,e(this)).bind("click",s):e(this).bind("submit",s)}),e.each(a,function(t,r){e(t).bind("blur",function(){i(t,r)})})};r.prototype.removeFields=function(t){var r=this,s=r.fields;e.isArray(t)?e.each(t,function(e,t){s[t]&&delete s[t]}):"string"==typeof t&&delete s[t]},r.prototype.addFields=function(t){var r=this,s=r.fields;e.isPlainObject(t)&&e.each(t,function(e,t){s[e]=t})};var s={email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,url:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/},i=function(t,r){var i=!0,a=null,l=r.required||"内容不能为空";return e(t).each(function(t,f){var d=e.trim(e(f).val());if(""===d)i=n(f,l);else for(var c in r)if(e.isPlainObject(r[c])){var u=r[c];if(a="string"==typeof u.test?s[u.test]:u.test,l=u.message||"",!a.test(d)){i=n(f,l);break}}i&&o(f)}),i},n=function(t,r){if(t.easyformError)t.easyformError.find(".easyform-error-message").text(r);else{var s=e('<div class="easyform-error"></div>');s.html('<em></em><span class="easyform-error-message">'+r+"</span>").appendTo(e("body")),t.easyformError=s,e(t).addClass("error"),a(t,s[0]),s.fadeIn()}return!1},o=function(t){t.easyformError&&(t.easyformError.fadeOut(function(){e(this).remove()}),t.easyformError=null,e(t).removeClass("error"))},a=function(t,r){var s=e(t).offset(),i=s.top,n=s.left,o=e(t).outerWidth(),a=e(t).outerHeight(),l="rgb(215, 115, 115)",f="display:none;position: absolute; width: 185px; background-color:"+l+"; color: #FFF; padding: 2px 8px; font-size: 13px; border-radius: 4px; line-height: 18px;left:"+(n+o+4)+"px;top:"+(i+(a-22)/2)+"px",d="position:absolute;width:0;height:0;line-height:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent "+l+" transparent transparent;top:6px;left:-10px;";mesStyle="display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;",r.style.cssText=f,e(r).find("em")[0].style.cssText=d,e(r).find("span")[0].style.cssText=mesStyle};e.fn.easyform=function(e){return new r(this,e)}})(this.jQuery,window);